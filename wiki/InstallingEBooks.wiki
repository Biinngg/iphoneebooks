#summary How to copy EBooks to your iPhone so Books.app can read them.
#labels Featured

= NEW! Use copybookdir.sh =

There is now available, [http://iphoneebooks.googlecode.com/files/copybookdir.sh in the downloads section], a bash shell-script which will copy a directory containing an eBook to your iPhone.  Download the script (from the svn trunk/scripts directory) and place it somewhere in your path. Do _not_ install it to your iPhone.  You still need iPHUC installed, but after you've done that, just do the following:
  # Plug in your iPhone.
  # Open a Terminal window.
  # Change to the directory where you saved copybookdir.sh.
  # Type {{{ ./copybookdir.sh /path/to/directory }}} where /path/to/directory is the directory where your chapter files are stored.  Copybookdir.sh will create the EBooks directory (if needed) as well as the directory for the book, and then copy the files in the directory to the iPhone.
  # _*Note well that there cannot be spaces in the directory name, nor in the names of the book or the chapters.*_  This limitation will be fixed in a future release. (This is because iPHUC cannot handle filenames with spaces unless they are escaped with backslashes--quotes don't work.)

Versions prior to Books.app 0.3 required you to type in the full pathname when invoking the script.  This has been fixed.

= Introduction =

This tutorial uses iPHUC to install eBooks into your Media/EBooks directory, where Books.app looks for them.  It is not neccesary to jailbreak your phone to do so--but of course, if you've installed Books.app your phone has already been jailbroken...

This tutorial has been written for Mac OS X.


== Copy books using iPHUC ==

  # Get and install [http://iphuc.googlecode.com/ iPHUC].
  # Plug in your iPhone to your computer.  If iTunes opens, let your phone sync and then quit iTunes.
  # Run iPHUC from the command-line (Terminal.app on a Mac).
  # Type: {{{ ls }}} to see your Media directory.  If you haven't already created an EBooks folder, type {{{ mkdir EBooks }}}.
  # Type: {{{ cd EBooks  }}} to put yourself into the EBooks directory.
  # Assuming you have a text file in your home directory, you can copy it to the EBooks folder by typing {{{ putfile /Users/yourusername/some_book.txt some_book.txt }}} where "yourusername" is your user name.  Note that, at least at this point, iPHUC requires the full path to the file you're copying.
  # If you want a prettier name on the Books.app file browser, you could type {{{ putfile /Users/yourusername/some_book.txt Some\ Book,\ by\ Jane\ Author }}}.  Note you need to escape all spaces with backslashes.
  # If you have a directory which contains a book broken up into chapters, you need to create a new directory and copy over each file separately.  Pain in the neck, but I hope to have a tool to automate this soon.

== Copy books using scp ==

To do this, you must first have enabled SSH on your phone, or it won't work at all, and you must be connected to a Wi-Fi network.

  # Find out your iPhone's IP address: Settings -> WiFi, then click the blue arrow to the right of your checked network.  The IP address will be listed on the next screen.  For the example we'll call it 192.168.1.1.
  # Make sure you don't let your iPhone sleep in the next few steps!
  # If you have one file, you can type: {{{ scp /path/to/file.html root@192.168.1.1:/var/root/Media/EBooks }}} (assuming you've already created the EBooks directory)
  # If you have more than one file in a local directory, for instance a book broken into chapters, you can type {{{ scp -r /path/to/directory root@192.168.1.1:/var/root/Media/EBooks }}}
  # Enter your password and the book will be copied over!

= Making your eBooks look nicer =

Text files straight from [http://www.gutenberg.org Project Gutenberg] have a couple of problems for our purposes.  First of all, they're very long, which makes it difficult to jump to a certain chapter, and second of all, they kinda look really ugly on the iPhone's screen.

Fortunately, there are several ways to fix this.  One of the easiest is to simply download the HTML version of a given text, if it's available.  For instance, [http://www.gutenberg.org/etext/768 Wuthering Heights] has a fine HTML version.  This does not solve the problem of long files, though.

Instead, I strongly recommend grabbing a copy of [http://www.sandroid.org/GutenMark GutenMark] and compiling it on your machine.  You can use GutenMark on a plain text Gutenberg file, and then use the associated utility GutenSplit to split the HTML file into chapters.  It works very well (usually).  See [http://sandroid.org/GutenMark/usage.html GutenMark's documentation] for details.

I intend to create a customized version of GutenSplit that will create HTML files tailored for the iPhone, and some time after that I will create a Mac OS X application that will both provide a front-end for GutenMark and also install eBooks on the iPhone automatically.
